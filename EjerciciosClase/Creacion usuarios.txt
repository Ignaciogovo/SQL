--CREAR ROL COCINEROS Y PERMISOS
	use arepazo
	create role cocineros;
	grant select on menu to cocineros;
	grant select on receta to cocineros;
	grant select on ingredientes to cocineros;	


--CREAR USUARIO Y AÑADIDO AL GRUPO
	use arepazo
	create login cocineropepe with password ='Ab1234567';
	create user cocineropepe for login cocineropepe
	alter role cocineros add member cocineropepe

--CREAR ROL CAMAREROS Y PERMISOS
	use arepazo
	create role camareros;
	grant select on menu to camareros;
	grant select on pedidos to camareros;
	grant select on pedidoslinea to camareros;
	grant update on pedidos to camareros;
	grant update on pedidoslinea to camareros;
	grant insert on pedidos to camareros;
	grant insert on pedidoslinea to camareros;


--CREAR USUARIO Y AÑADIDO AL GRUPO
	use arepazo
	create login camareropaco with password ='Ab1234567';
	create user camareropaco for login camareropaco;
	alter role camareros add member camareropaco;




-- CREAR USUARIO JEFE Y PERMISOS
use arepazo
create login jefe with password ='Ab1234567';
create user jefe for login jefe
alter role cocineros add member jefe
alter role camareros add member jefe
grant update on object::menu to jefe;
grant delete on object::menu to jefe;
grant insert on object::menu to jefe;
grant delete on object::pedidos to jefe;
grant delete on object::pedidoslinea to jefe;


--VISTA
create view menuparaclientes
as
select m.Id,nombre,m.Descripcion,t.Descripcion as tipo,c.Descripcion as categoria,PrecioVenta 
from Menu  as m left join TipoAlimento as t
on t.Id=m.Tipo 
right join CategoriasMenu as c
on c.Id=m.categoria


--Permisos de vista a invitado
create login invitado with password = 'Prueba1234'
create user invitado for login invitado
grant select  on object::menuparaclientes to invitado